<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<body>

    <div metal:fill-slot="content-core"
      tal:define="b_start python:request.get('b_start', 0);
                  batch python:context.results(b_start=b_start);
                  normalizeString nocall: context/plone_utils/normalizeString;">

            <div metal:use-macro="context/batch_macros/macros/navigation" />

            <div class="table-responsive">
            <table class="table listing"
                  i18n:attributes="summary"
                   summary="Content listing"
                   tal:condition="batch"
                   tal:define="pas_member context/@@pas_member"
                   >
                <thead>
                    <tr>
                        <th class="nosort header-title">&nbsp;<tal:title i18n:translate="listingheader_title"
                          >Title</tal:title>&nbsp;</th>
                        <th class="nosort header-author"
                            >&nbsp;<tal:title i18n:translate="listingheader_author"
                          >Author</tal:title>&nbsp;</th>

                        <th class="nosort"
                            >&nbsp;<tal:modified i18n:translate="listingheader_year"
                          >Jaar</tal:modified>&nbsp;</th>
                    </tr>
                </thead>

                <tbody>
                    <tal:block tal:repeat="item batch">

                    <tr 
                        tal:define="oddrow repeat/item/odd;
                                    item_url item/getURL;
                                    item_id item/getId|item/id;
                                    item_type item/portal_type;
                                    item_title_or_id python: item.Title() if item.Title() != '' else item_id;
                                    item_description item/Description;
                                    item_creator item/Creator;
                                    item_type_class python:'contenttype-' + normalizeString(item_type);
                                    item_wf_state item/review_state|python: context.portal_workflow.getInfoFor(item, 'review_state', '');
                                    item_wf_state_class python:'state-' + normalizeString(item_wf_state);"
                        tal:attributes="class python:'even' if oddrow else 'odd'">

                            <td>
                                
                                <a href="#"
                                   tal:attributes="href python:item_url;
                                                   class string:$item_wf_state_class $item_type_class;
                                                   title item_description;"
                                   tal:content="item_title_or_id">
                                    Item Title
                                </a>
                            </td>

                            <td>
                                <tal:name tal:condition="item_creator"
                                  tal:define="author python:view.getAuthor(pas_member.info(item_creator), item)">
                                
                                <a 
                                   tal:replace="structure author"
                                   tal:omit-tag="not:author">
                                  Bob Dobalina
                                </a>

                                </tal:name>
                            </td>
                            
                        <td>
                          <tal:year tal:define="year python: view.getYear(item)">
                            <span tal:content="year" tal:omit-tag="not:year"></span>
                          </tal:year>
                        </td>
                    </tr>
                  </tal:block>

                </tbody>
            </table>
            </div>
        
          <div metal:use-macro="context/batch_macros/macros/navigation" />
          <div class="clearfix"></div>
    </div>

</body>
</html>
